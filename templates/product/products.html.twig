{% extends 'base.html.twig' %}

{% block title %}Nos Produits
{% endblock %}

{% block body %}
	<div class="container-fluid py-4 px-3">

		<h1 class="text-center text-primary-emphasis mb-5 display-5 fw-bold">
			Nos Produits
		</h1>

		<div class="row gx-5 gy-4">

			<aside class="col-12 col-lg-3 mb-4 mb-lg-0">
				<div class=" border-0 rounded-4 sticky-top" style="top: 90px;">
					<div class="card-body">
						<h5 class="text-primary-emphasis mb-4 fw-semibold text-center">Filtrer les Produits</h5>
						{{ form_start(form) }}
						{{ form_row(form.filter) }}
						{{ form_row(form.min) }}
						{{ form_row(form.max) }}
						{{ form_row(form.string) }}
						{{ form_row(form.categories) }}
						<div class="d-grid mt-3">
							{{ form_row(form.submit) }}
						</div>
						{{ form_end(form) }}
					</div>
				</div>
			</aside>

			{% if products|length > 0  %}
				
				<section class="col-12 col-lg-9">
					<div class="row justify-content-center gy-4 **gx-3**">

						{% for product in products %}
							<div class="col-12 col-sm-6 col-md-4 col-lg-3">
								<div class="card border-0 shadow-sm rounded-4 text-center h-100 transition-all" style="transition: transform 0.3s ease, box-shadow 0.3s ease;">
									<a href="{{ path('app_product', {'slug': product.slug}) }}" class="text-decoration-none text-dark">

										<img style="max-width:200px ;min-width:200px ;min-height: 225px; max-height:225px;  border-radius: 10%; image-rendering: optimizeQuality;" src="uploads/{{ product.illustration }}" alt="{{ product.name }}" class="img-fluid rounded-top-4" style="height: 220px; object-fit: cover;">
										<div class="card-body">
											<h6 class="text-primary-emphasis mb-1 fw-semibold">{{ product.name }}</h6>
											<p class="small text-muted text-truncate-2" style="height: 60px;">
												{{ product.description|striptags|slice(0, 30) }}
											</p>

											<div class="d-flex justify-content-center align-items-center gap-2">
												<span class="fw-bold text-primary-emphasis">{{ product.price|price }}</span>
												<a href="{{ path('app_cart_add', { id: product.id }) }}">

													<i data-feather="shopping-bag"></i>
												</a>

											</div>
										</div>
									</a>
								</div>
							</div>


						{% endfor %}
					{% else %}
						<div class="col-12 text-center py-5">
							<p class="text-muted fs-5">Aucun produit trouv√© pour le moment.</p>
						</div>
					{% endif %}
				</div>
			</section>
		</div>
	</div>


{% endblock %}
