
{% extends 'base.html.twig' %}

{% block title %}Supprimer mon compte{% endblock %}

{% block body %}
    <div class="container my-5">
        <div class="row justify-content-center">
            {# Use a card to contain the section, giving it a clean, visual boundary #}
            <div class="col-md-10 col-lg-8">
                <div class="card shadow-lg border-danger rounded-4 p-4 p-md-5">
                    
                    <h2 class="mb-4 text-danger fw-bold border-bottom pb-2">
                        ⚠️ Supprimer votre compte
                    </h2>

                    {# Use a paragraph for the main text and style the username #}
                    <p class="lead">
					 Bonjour <strong class="text-primary-emphasis">{{app.user}}</strong>
                      
                    </p>
                    <p class="text-muted mb-4">
                        Vous êtes sur le point de supprimer votre compte de manière définitive. Cette action est **irréversible**. Si vous changez d'avis, vous risquez de ne pas pouvoir le récupérer ultérieurement.
                        Veuillez lire attentivement les conséquences avant de confirmer.
                    </p>

                    {# Delete Button that triggers the modal #}
                    <div class="mt-4 pt-3 border-top">
                        <p class="fw-semibold text-danger">
                            Cliquez ci-dessous pour lancer la procédure de suppression :
                        </p>
                        {# The button's href is irrelevant since data-bs-toggle is present, but kept for semantics #}
                        <button type="button" class="btn btn-lg btn-danger shadow-sm" data-bs-toggle="modal" data-bs-target="#confirmDeleteModal">
                            Supprimer mon compte
                        </button>
                    </div>

                </div>
            </div>
        </div>
    </div>

    {# --------------------------- CONFIRMATION MODAL --------------------------- #}

    <div class="modal fade" id="confirmDeleteModal" tabindex="-1" aria-labelledby="confirmDeleteModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content border-danger">
                <div class="modal-header bg-danger text-white">
                    <h1 class="modal-title fs-5" id="confirmDeleteModalLabel">
                        <i class="bi bi-exclamation-triangle-fill me-2"></i>Confirmation de Suppression
                    </h1>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body text-center py-4">
                    <i class="bi bi-trash-fill text-danger display-4"></i>
                    <p class="mt-3 fs-5 fw-semibold text-dark">
                        Voulez-vous vraiment supprimer votre compte ?
                    </p>
                    <p class="text-danger">
                        Cette suppression est **permanente et ne peut jamais être annulée**.
                    </p>
                    <p class="small text-muted">
                        Veuillez confirmer pour continuer.
                    </p>
                </div>
                <div class="modal-footer justify-content-center">
                    {# IMPORTANT: This is the actual link to the controller endpoint #}
                    {# {{ dump(app.user) }} #}
                    <a href="{{path('app_deleteAccount',{id:app.user.id})}}" class="btn btn-danger btn-lg">
                        Confirmer la Suppression
                    </a>
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
                        Annuler
                    </button>
                </div>
            </div>
        </div>
    </div>
{% endblock %}